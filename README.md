# Tutorly

Приложение для индивидуальных преподавателей, которое помогает планировать расписание занятий, вести базу учеников и контролировать оплату. Проект построен на Jetpack Compose и уже содержит рабочий каркас с несколькими готовыми экранами, модульной архитектурой данных и DI на основе Hilt.

## Что уже реализовано

### Общая навигация и оформление
- **Одноактивити-приложение**: `MainActivity` разворачивает тему `AppTheme` и подключает корень навигации `AppNavRoot`, так что все экраны реализованы на Compose и получают зависимости через Hilt.
- **Нижняя панель** с четырьмя вкладками (Календарь, Сегодня, Ученики, Финансы) и подсветкой выбранного пункта реализована в `AppBottomBar` и автоматически синхронизируется с текущим маршрутом навигации.
- **Глобальный TopAppBar** подключается для экранов, где требуется простой заголовок и кнопка добавления (например, для учеников). Для календаря и «Сегодня» верхние панели отрисовываются внутри самих экранов.

### Экран календаря
- **Переключение режимов День/Неделя/Месяц** с запоминанием выбранного режима и якорной даты. Режим меняется из табов, а данные сохраняются через `rememberSaveable`.
- **Жесты перелистывания**: свайпы по хедеру и по основному контенту срабатывают на смену периода (день, неделя или месяц). При переходах между датами проигрывается анимация слайдом и фейдом.
- **Дневная шкала** с сеткой часов, пролистыванием, позиционированием карточек занятий по времени и подписью ученика/темы. Это демонстрация того, как будущие реальные данные будут отображаться по часам.
- **Компактная «мозаика недели»**: сетка 2×4 с карточками дней и блоком статистики (кол-во уроков, оплаченных занятий, долгов, доход). Карточка «Сегодня» подсвечивается, для текущих уроков показывается отдельный блок «Идут сейчас».
- **Стрип дней недели** под табами «День» для быстрого выбора даты и визуализации выбранного дня.
- Режим «Месяц» пока выступает в роли заглушки, что упрощает дальнейшее развитие без ломки навигации.

### Работа с учениками
- **Список учеников** с поиском по имени и телефону, пустым состоянием и бейджем «Есть долг». Данные берутся из `StudentsVM`, который использует `StudentsRepository` и комбинирует поток учеников с информацией о долгах из платежей.
- **Редактор ученика**: отдельный экран с `TopAppBar` (кнопки «Закрыть» и «Сохранить»), полями ввода имени/телефона/заметки и логикой загрузки существующего ученика через `SavedStateHandle`. Сохранение выполняет `upsert` в репозитории и возвращает идентификатор новой записи.

### Финансы и «Сегодня»
- Для вкладок «Сегодня» и «Финансы» пока подключены осмысленные заглушки, чтобы навигация работала и было понятно назначение экранов. Эти места готовы к наполнению аналитическими дашбордами и отчетами.

## Архитектура и данные
- **Слой данных на Room**: определены сущности `Student`, `Lesson`, `Payment`, `SubjectPreset` с ключами, индексами и связями, что задает структуру БД и отражает будущие сценарии (оплаты, статусы уроков, цвета предметов).
- **DAO и репозитории**: для каждой сущности есть DAO, а слой домена представляет интерфейсы `StudentsRepository`, `LessonsRepository`, `SubjectPresetsRepository`, `PaymentsRepository`. На уровне данных реализованы Room-репозитории, например `RoomStudentsRepository`, который сочетает запросы по ученикам с расчетом долга через `PaymentDao`.
- **DI-модуль** `DatabaseModule` разворачивает базу, DAO и репозитории как синглтоны, что позволяет использовать `hiltViewModel()` в Compose-компонентах без ручного создания зависимостей.
- **Темизация**: в модуле `ui/theme` определены цветовая палитра, типографика и базовый `AppTheme`, чтобы экраны выглядели единообразно (файлы не перечислены здесь, но структура уже создана).

## Как запустить
1. Установите Android Studio Iguana или новее и откройте директорию `tutorly` как проект Gradle.
2. Синхронизируйте зависимости (Gradle Wrapper уже в репозитории).
3. Соберите и запустите приложение на эмуляторе/устройстве: `./gradlew :app:installDebug`.
4. При первом запуске создастся локальная база `tutorly.db` (Room, destructive migration включен до появления миграций).

## План развития
- Подключить реальные данные к расписанию (репозитории уроков и платежей).
- Реализовать экран «Сегодня» с метриками и быстрыми действиями.
- Добавить аналитику по финансам и отчеты в одноименный раздел.
- Настроить полноценные миграции Room и покрыть слой данных тестами.
- Разделить демо-данные и production-данные для календаря.

